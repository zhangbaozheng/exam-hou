{"version":3,"sources":["components/ContentBox.tsx","api/grade.ts","../node_modules/_antd@4.7.2@antd/es/space/Item.js","../node_modules/_antd@4.7.2@antd/es/space/index.js","views/main/Main-Grade.tsx"],"names":["ContentBox","props","style","width","height","padding","background","overflowY","title","borderRadius","Module","this","Component","_getGradeList","request","get","_gradeListDel","id","delete","params","grade_id","_gradeListAdd","value","post","_gradeListEdit","put","JSON","stringify","room_id","subject_id","headers","_getRoomList","_gradeRoomDel","data","eoom_id","_gradeRoomAdd","_getSubjectList","_getStudentList","_gradeStudentDel","_gradeStudent","obj","console","log","_studentName","spaceSize","small","middle","large","Item","_ref","_a","className","direction","index","size","marginDirection","children","split","latestIndex","React","LastIndexContext","undefined","_defineProperty","concat","__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","Space","_classNames","_React$useContext","ConfigContext","getPrefixCls","space","directionConfig","_props$size","align","_props$direction","customizePrefixCls","prefixCls","otherProps","childNodes","toArray","keepEmpty","mergedAlign","cn","classNames","itemClassName","nodes","map","child","key","_extends","Provider","Option","Select","Grade","state","columns","dataIndex","render","text","record","onClick","showModal","gradeListDel","visible","red","layout","labelCol","span","wrapperCol","tailLayout","offset","handleCancel","setState","getGradeList","res","code","message","info","num","values","roomRes","filter","item","room_text","includes","val","subjectRes","subject_text","grade_name","type","margin","onCancel","footer","name","initialValues","onFinish","label","rules","required","placeholder","allowClear","htmlType","cancel","marginRight","dataSource","rowKey"],"mappings":"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","file":"static/js/13.e8777a9d.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\n\r\ninterface Props {\r\n    Module: any\r\n    title: string\r\n}\r\n\r\nconst ContentBox = (props:Props):any => {\r\n    return class ContentBox extends Component {\r\n        render() {\r\n            return <div style={{width:\"100%\",height:\"100%\",padding: '20px',background:'#f0f2f5',overflowY:'auto'}}>\r\n                    <h2 style={{ padding: '10px 0' }}>{props.title}</h2>\r\n                    <div style={{ width:\"100%\",height:\"100%\",background:'#fff',borderRadius:'10px'}}>\r\n                        <props.Module {...this.props}/>\r\n                    </div>\r\n                </div>\r\n        }\r\n    }\r\n}\r\n\r\nexport default ContentBox\r\n\r\n//高阶组件，用于content的样式和标题展示","/*\r\n * @Description:\r\n * @Author: 王寒烟\r\n * @Date: 2020-10-19 19:20:22\r\n * @LastEditTime: 2020-10-22 18:55:07\r\n * @LastEditors: Please set LastEditors\r\n * @FilePath: \\exam-L\\src\\api\\grade.ts\r\n */\r\nimport request from \"@/utils/request\";\r\n\r\n//班级信息\r\nexport function _getGradeList() {\r\n  return request.get(\"/manger/grade\");\r\n}\r\n\r\n//删除班级\r\nexport function _gradeListDel(id:string) {\r\n  return request.delete('/manger/grade/delete',{\r\n    params: {\r\n      grade_id: id\r\n    }\r\n  })\r\n}\r\n\r\n//添加班级\r\nexport function _gradeListAdd(value: any) {\r\n  return request.post(\"/manger/grade\", value);\r\n}\r\n\r\n//修改班级\r\nexport function _gradeListEdit(value: any) {\r\n  return request.put(\r\n    \"/manger/grade/update\",\r\n    JSON.stringify({\r\n      grade_id: value.grade_id,\r\n      room_id: value.room_id,\r\n      subject_id: value.subject_id,\r\n    }),\r\n    {\r\n      headers: {\r\n        \"Content-type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\n\r\n//教室管理\r\n//获取教室信息\r\nexport function _getRoomList() {\r\n  return request.get(\"/manger/room\");\r\n}\r\n\r\n//删除教室\r\nexport function _gradeRoomDel(id: string) {\r\n  return request.delete(\"/manger/room/delete\", {\r\n    data: {\r\n      eoom_id: id,\r\n    },\r\n  });\r\n}\r\n\r\n//添加教室\r\nexport function _gradeRoomAdd(value: any) {\r\n  return request.post(\"/manger/room\", value);\r\n}\r\n\r\n\r\n\r\n\r\n\r\n//获取课程信息\r\nexport function _getSubjectList() {\r\n  return request.get('/exam/subject')\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//学生管理\r\n//学生数据信息\r\nexport function _getStudentList() {\r\n  return request.get(\"/manger/student\");\r\n}\r\n\r\n//删除\r\nexport function _gradeStudentDel(id: string) {\r\n  return request.delete(`/manger/student/${id}`);\r\n}\r\n//根据班级id来获取每个班级学生的分数\r\nexport function _gradeStudent(obj: object) {\r\n  console.log(obj);\r\n  let url = \"/grade/getstudent\";\r\n  return request.post(url, obj);\r\n}\r\n//根据班级获取名字\r\n\r\nexport function _studentName(obj: any) {\r\n  console.log(obj);\r\n  let url = \"/exam/student\";\r\n  return request.get(url, {\r\n    params: {\r\n      grade_id: obj.grade_id ? obj.grade_id : \"tjdbk9-r8dbn8-4wsck-c7akdb\",\r\n    },\r\n  });\r\n}\r\n","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport * as React from 'react';\nimport { LastIndexContext } from '.';\nvar spaceSize = {\n  small: 8,\n  middle: 16,\n  large: 24\n};\nexport default function Item(_ref) {\n  var className = _ref.className,\n      direction = _ref.direction,\n      index = _ref.index,\n      size = _ref.size,\n      marginDirection = _ref.marginDirection,\n      children = _ref.children,\n      split = _ref.split;\n\n  var _a;\n\n  var latestIndex = React.useContext(LastIndexContext);\n\n  if (children === null || children === undefined) {\n    return null;\n  }\n\n  var style = index >= latestIndex ? {} : _defineProperty({}, direction === 'vertical' ? 'marginBottom' : marginDirection, ((_a = typeof size === 'string' ? spaceSize[size] : size) !== null && _a !== void 0 ? _a : 0) / (split ? 2 : 1));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: className,\n    style: style\n  }, children), index < latestIndex && split && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"\".concat(className, \"-split\"),\n    style: style\n  }, split));\n}","import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport { ConfigContext } from '../config-provider';\nimport Item from './Item';\nexport var LastIndexContext = /*#__PURE__*/React.createContext(0);\n\nvar Space = function Space(props) {\n  var _classNames;\n\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls,\n      space = _React$useContext.space,\n      directionConfig = _React$useContext.direction;\n\n  var _props$size = props.size,\n      size = _props$size === void 0 ? (space === null || space === void 0 ? void 0 : space.size) || 'small' : _props$size,\n      align = props.align,\n      className = props.className,\n      children = props.children,\n      _props$direction = props.direction,\n      direction = _props$direction === void 0 ? 'horizontal' : _props$direction,\n      customizePrefixCls = props.prefixCls,\n      split = props.split,\n      otherProps = __rest(props, [\"size\", \"align\", \"className\", \"children\", \"direction\", \"prefixCls\", \"split\"]);\n\n  var childNodes = toArray(children, {\n    keepEmpty: true\n  });\n\n  if (childNodes.length === 0) {\n    return null;\n  }\n\n  var mergedAlign = align === undefined && direction === 'horizontal' ? 'center' : align;\n  var prefixCls = getPrefixCls('space', customizePrefixCls);\n  var cn = classNames(prefixCls, \"\".concat(prefixCls, \"-\").concat(direction), (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-rtl\"), directionConfig === 'rtl'), _defineProperty(_classNames, \"\".concat(prefixCls, \"-align-\").concat(mergedAlign), mergedAlign), _classNames), className);\n  var itemClassName = \"\".concat(prefixCls, \"-item\");\n  var marginDirection = directionConfig === 'rtl' ? 'marginLeft' : 'marginRight'; // Calculate latest one\n\n  var latestIndex = 0;\n  var nodes = childNodes.map(function (child, i) {\n    if (child !== null && child !== undefined) {\n      latestIndex = i;\n    }\n    /* eslint-disable react/no-array-index-key */\n\n\n    return /*#__PURE__*/React.createElement(Item, {\n      className: itemClassName,\n      key: \"\".concat(itemClassName, \"-\").concat(i),\n      direction: direction,\n      size: size,\n      index: i,\n      marginDirection: marginDirection,\n      split: split\n    }, child);\n    /* eslint-enable */\n  });\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: cn\n  }, otherProps), /*#__PURE__*/React.createElement(LastIndexContext.Provider, {\n    value: latestIndex\n  }, nodes));\n};\n\nexport default Space;","import React, { Component } from 'react'\r\nimport ContentBox from '@/components/ContentBox'\r\nimport { _getGradeList, _gradeListDel, _gradeListAdd, _gradeListEdit, _getRoomList, _getSubjectList } from '@/api/grade'\r\nimport { Table, Space, message, Button, Modal, Form, Input, Select } from 'antd';\r\nconst { Option } = Select;\r\n\r\ninterface Props {\r\n\r\n}\r\ninterface State {\r\n  columns: any,\r\n  data: any,\r\n  visible: boolean,\r\n  title: string,\r\n  num: number,\r\n  red: any,\r\n  layout: any,\r\n  tailLayout: any,\r\n  room_id: string,\r\n  subject_id: string,\r\n  grade_id: string\r\n}\r\nclass Grade extends Component<Props, State> {\r\n  state: any = {\r\n    columns: [\r\n      {\r\n        title: '班級',\r\n        dataIndex: 'grade_name',\r\n        key: 'grade_name',\r\n        render: (text: React.ReactNode) => <span>{text}</span>,\r\n      },\r\n      {\r\n        title: '課程名',\r\n        dataIndex: 'subject_text',\r\n        key: 'subject_text',\r\n      },\r\n      {\r\n        title: '教室號',\r\n        dataIndex: 'room_text',\r\n        key: 'room_text',\r\n      },\r\n      {\r\n        title: '操作',\r\n        key: 'action',\r\n        render: (text: any, record: { name: React.ReactNode; }) => (\r\n          <Space size=\"middle\">\r\n            <span onClick={() => { this.showModal(2, record) }}>修改</span>\r\n            <span onClick={() => { this.gradeListDel(record) }}>删除</span>\r\n          </Space>\r\n        ),\r\n      },\r\n    ],\r\n    data: [],\r\n    visible: false,//modal弹框\r\n    title: '+添加班级',\r\n    // num:1,//添加和修改的标识\r\n    red: '',//点击编辑时该商品的所有项\r\n    layout: {\r\n      labelCol: { span: 8 },\r\n      wrapperCol: { span: 16 },\r\n    },\r\n    tailLayout: {\r\n      wrapperCol: { offset: 8, span: 16 },\r\n    },\r\n    room_id: '',//输入的教室号对应的教室id\r\n    subject_id: '',//输入的课程名对应的id\r\n    grade_id: '',//输入的班级名对应的id\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getGradeList()\r\n  }\r\n  //班级信息\r\n  async getGradeList() {\r\n    const res = await _getGradeList();\r\n    console.log(res.data.data)\r\n    if (res.data.code) {\r\n      this.setState({\r\n        data: res.data.data\r\n      })\r\n    }\r\n  }\r\n  //删除班级\r\n  async gradeListDel(record: any) {\r\n    // console.log(record)\r\n    const res = await _gradeListDel(record.grade_id);\r\n    // console.log(res.data)\r\n    if (res.data.code) {\r\n      this.getGradeList()\r\n      message.info('删除成功');\r\n    } else {\r\n      message.info('删除失败');\r\n    }\r\n  }\r\n\r\n  //点击添加班级或修改显示弹框\r\n  showModal(num: number, record: any) {\r\n    // console.log(record)\r\n    this.setState({\r\n      visible: true,\r\n      title: num === 1 ? '添加班级' : '修改班级',\r\n      red: record\r\n    });\r\n  };\r\n\r\n\r\n  //点击提交\r\n  async onFinish(values: any) {\r\n    // console.log(values)\r\n\r\n    //获取输入的教室名对应的id\r\n    const roomRes = await _getRoomList()\r\n    const roomArr = roomRes.data.data.filter((item: any) => {\r\n      return item.room_text.includes(values.room_text)\r\n    })\r\n    roomArr.map((val: any) => {\r\n      return this.setState({\r\n        room_id: val.room_id\r\n      })\r\n    })\r\n\r\n    //获取输入的课程名对应的id\r\n    const subjectRes = await _getSubjectList()\r\n    const subjectArr = subjectRes.data.data.filter((item: any) => {\r\n      return item.subject_text.includes(values.subject_text)\r\n    })\r\n    subjectArr.map((val: any) => {\r\n      return this.setState({\r\n        subject_id: val.subject_id\r\n      })\r\n    })\r\n\r\n    //获取输入的班级名对应的id\r\n    const gradeArr = this.state.data.filter((item: any) => {\r\n      return item.grade_name.includes(values.grade_name)\r\n    })\r\n    gradeArr.map((val: any) => {\r\n      return this.setState({\r\n        grade_id: val.grade_id\r\n      })\r\n    })\r\n\r\n    let obj = {\r\n      grade_name: values.grade_name,//输入的班级名\r\n      room_id: this.state.room_id,//输入的教室号对应的id\r\n      subject_id: this.state.subject_id,//输入的课程名对应的id\r\n      grade_id: this.state.grade_id,//输入的班级名对应的id\r\n    }\r\n\r\n    if (this.state.title === '添加班级') {\r\n      const res = await _gradeListAdd(obj);\r\n      // console.log(res)\r\n      if (res.data.code) {\r\n        this.getGradeList();\r\n        this.setState({\r\n          visible: false,\r\n        });\r\n      }\r\n    }\r\n    if (this.state.title === '修改班级') {\r\n      const res = await _gradeListEdit(obj);\r\n      // console.log(res)\r\n      if (res.data.code) {\r\n        this.getGradeList();\r\n        this.setState({\r\n          visible: false,\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  //点击弹框x\r\n  handleCancel = (e: any) => {\r\n    this.setState({\r\n      visible: false,\r\n    });\r\n  };\r\n  cancel() {\r\n    this.setState({\r\n      visible: false,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Button type=\"primary\" onClick={() => { this.showModal(1, null) }} style={{ margin: '15px' }}>\r\n          +添加班级\r\n        </Button>\r\n        {/* 弹框 */}\r\n        <Modal\r\n          title={this.state.title}\r\n          visible={this.state.visible}\r\n          onCancel={this.handleCancel}\r\n          footer={null}\r\n        >\r\n          <Form\r\n            {...this.state.layout}\r\n            name=\"basic\"\r\n            initialValues={this.state.red}\r\n            onFinish={(values) => { this.onFinish(values) }}\r\n          >\r\n            <Form.Item\r\n              label=\"班级名\"\r\n              name=\"grade_name\"\r\n              rules={[{ required: true, message: '班级名' }]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item\r\n              label=\"教室号\"\r\n              name=\"room_text\"\r\n              rules={[{ required: true, message: '选择教室号!' }]}\r\n            >\r\n              <Select\r\n                placeholder=\"选择教室号\"\r\n                allowClear\r\n              >\r\n                {\r\n                  this.state.data.map((item: any, index: number) => {\r\n                    return <Option value={item.room_text} key={index} item={item}>{item.room_text}</Option>\r\n                  })\r\n                }\r\n              </Select>\r\n            </Form.Item>\r\n\r\n            <Form.Item\r\n              label=\"课程名\"\r\n              name=\"subject_text\"\r\n              rules={[{ required: true, message: '课程名!' }]}\r\n            >\r\n              <Select\r\n                placeholder=\"课程名\"\r\n                allowClear\r\n              >\r\n                {\r\n                  this.state.data.map((item: any, index: number) => {\r\n                    return <Option value={item.subject_text} key={index} item={item}>{item.subject_text}</Option>\r\n                  })\r\n                }\r\n              </Select>\r\n            </Form.Item>\r\n\r\n            <Form.Item {...this.state.tailLayout}>\r\n              <Button type=\"primary\" htmlType=\"submit\" onClick={() => { this.cancel() }} style={{ marginRight: '10px' }}>\r\n                取消\r\n              </Button>\r\n              <Button type=\"primary\" htmlType=\"submit\">\r\n                提交\r\n              </Button>\r\n            </Form.Item>\r\n          </Form>\r\n        </Modal>\r\n        <Table columns={this.state.columns} dataSource={this.state.data} rowKey='grade_id' />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default ContentBox({\r\n  title: '班级管理',\r\n  Module: Grade\r\n})\r\n"],"sourceRoot":""}