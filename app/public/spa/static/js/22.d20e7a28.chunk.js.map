{"version":3,"sources":["components/ContentBox.tsx","api/grade.ts","views/main/Main-Chart.tsx"],"names":["ContentBox","props","style","width","height","padding","background","overflowY","title","borderRadius","Module","this","Component","_getGradeList","request","get","_gradeListDel","id","delete","params","grade_id","_gradeListAdd","value","post","_gradeListEdit","put","JSON","stringify","room_id","subject_id","headers","_getRoomList","_gradeRoomDel","data","eoom_id","_gradeRoomAdd","_getSubjectList","_getStudentList","_gradeStudentDel","_gradeStudent","obj","console","log","_studentName","Option","Select","MainChart","state","option","tooltip","trigger","yAxis","type","xAxis","name","gradeData","ref","defaultValue","onChange","values","onDeselect","map","item","index","key","grade_name","eckhart","init","refs","mian","setOption","getGradeList","result","setState","myChart","results","newdata","_","newdataname","exam","series"],"mappings":"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","file":"static/js/22.d20e7a28.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\n\r\ninterface Props {\r\n    Module: any\r\n    title: string\r\n}\r\n\r\nconst ContentBox = (props:Props):any => {\r\n    return class ContentBox extends Component {\r\n        render() {\r\n            return <div style={{width:\"100%\",height:\"100%\",padding: '20px',background:'#f0f2f5',overflowY:'auto'}}>\r\n                    <h2 style={{ padding: '10px 0' }}>{props.title}</h2>\r\n                    <div style={{ width:\"100%\",height:\"100%\",background:'#fff',borderRadius:'10px'}}>\r\n                        <props.Module {...this.props}/>\r\n                    </div>\r\n                </div>\r\n        }\r\n    }\r\n}\r\n\r\nexport default ContentBox\r\n\r\n//高阶组件，用于content的样式和标题展示","/*\r\n * @Description:\r\n * @Author: 王寒烟\r\n * @Date: 2020-10-19 19:20:22\r\n * @LastEditTime: 2020-10-22 18:55:07\r\n * @LastEditors: Please set LastEditors\r\n * @FilePath: \\exam-L\\src\\api\\grade.ts\r\n */\r\nimport request from \"@/utils/request\";\r\n\r\n//班级信息\r\nexport function _getGradeList() {\r\n  return request.get(\"/manger/grade\");\r\n}\r\n\r\n//删除班级\r\nexport function _gradeListDel(id:string) {\r\n  return request.delete('/manger/grade/delete',{\r\n    params: {\r\n      grade_id: id\r\n    }\r\n  })\r\n}\r\n\r\n//添加班级\r\nexport function _gradeListAdd(value: any) {\r\n  return request.post(\"/manger/grade\", value);\r\n}\r\n\r\n//修改班级\r\nexport function _gradeListEdit(value: any) {\r\n  return request.put(\r\n    \"/manger/grade/update\",\r\n    JSON.stringify({\r\n      grade_id: value.grade_id,\r\n      room_id: value.room_id,\r\n      subject_id: value.subject_id,\r\n    }),\r\n    {\r\n      headers: {\r\n        \"Content-type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\n\r\n//教室管理\r\n//获取教室信息\r\nexport function _getRoomList() {\r\n  return request.get(\"/manger/room\");\r\n}\r\n\r\n//删除教室\r\nexport function _gradeRoomDel(id: string) {\r\n  return request.delete(\"/manger/room/delete\", {\r\n    data: {\r\n      eoom_id: id,\r\n    },\r\n  });\r\n}\r\n\r\n//添加教室\r\nexport function _gradeRoomAdd(value: any) {\r\n  return request.post(\"/manger/room\", value);\r\n}\r\n\r\n\r\n\r\n\r\n\r\n//获取课程信息\r\nexport function _getSubjectList() {\r\n  return request.get('/exam/subject')\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//学生管理\r\n//学生数据信息\r\nexport function _getStudentList() {\r\n  return request.get(\"/manger/student\");\r\n}\r\n\r\n//删除\r\nexport function _gradeStudentDel(id: string) {\r\n  return request.delete(`/manger/student/${id}`);\r\n}\r\n//根据班级id来获取每个班级学生的分数\r\nexport function _gradeStudent(obj: object) {\r\n  console.log(obj);\r\n  let url = \"/grade/getstudent\";\r\n  return request.post(url, obj);\r\n}\r\n//根据班级获取名字\r\n\r\nexport function _studentName(obj: any) {\r\n  console.log(obj);\r\n  let url = \"/exam/student\";\r\n  return request.get(url, {\r\n    params: {\r\n      grade_id: obj.grade_id ? obj.grade_id : \"tjdbk9-r8dbn8-4wsck-c7akdb\",\r\n    },\r\n  });\r\n}\r\n","//@ts-nocheck\r\nimport eckhart from \"echarts\";\r\nimport { Select } from \"antd\";\r\nimport _ from \"lodash\";\r\nimport ContentBox from '@/components/ContentBox'\r\nimport React, { Component } from \"react\";\r\nimport { _getGradeList, _gradeStudent, _studentName } from \"@/api/grade\";\r\nconst { Option } = Select;\r\ninterface Props {}\r\ninterface State {}\r\nclass MainChart extends Component<Props, State> {\r\n  state = {\r\n    option: {\r\n    tooltip: {\r\n      trigger: 'axis'\r\n    },\r\n    yAxis: {\r\n      type: 'value'\r\n    },\r\n      xAxis: {\r\n        type: \"category\",\r\n        data: [\"李潘红\", \"卢毓儒\", \"窦永铎\", \"侯瑞峰\", \"李仁鹏\", \"郭小刚\", \"王坤\", \"孟莹\", \"张馨心\", \"闫国程\", \"楚凤沛\", \"张志祥\", \"翟怡梦\"],\r\n    },\r\n      tooltip: {\r\n        trigger: 'axis'\r\n    },\r\n      series: [\r\n        {\r\n          data:  [96, 97, 88, 83, 89, 68, 44, 88, 35, 35, 100, 78, 93, 68, 86, 99, 77, 100, 100, 35, 35, 77, 66, 67, 99, 89],\r\n          type: \"line\",\r\n          name: '分数',\r\n        },\r\n      ],\r\n    },\r\n    gradeData: [],\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div\r\n          id=\"main\"\r\n          style={{ width: \"1200px\", height: \"500px\" }}\r\n          ref=\"mian\"\r\n        ></div>\r\n        <span>请选择班级 : </span>\r\n        <Select\r\n          defaultValue=\"1610A\"\r\n          style={{ width: 120 }}\r\n          onChange={(values) => {\r\n            this.onDeselect(values);\r\n          }}\r\n        >\r\n          {this.state.gradeData.map((item, index) => {\r\n            return (\r\n              <Option value={item.grade_id} key={index}>\r\n                {item.grade_name}\r\n              </Option>\r\n            );\r\n          })}\r\n        </Select>\r\n      </div>\r\n    );\r\n  }\r\n  async componentDidMount() {\r\n    let myChart = eckhart.init(this.refs.mian);\r\n    myChart.setOption(this.state.option);\r\n    this.getGradeList();\r\n    // this.onDeselect();\r\n  }\r\n  //获取班级信息\r\n  async getGradeList() {\r\n    let result = await _getGradeList();\r\n    console.log(result.data.data);\r\n    this.setState({\r\n      gradeData: result.data.data,\r\n    });\r\n  }\r\n  //根据班级来获取学生分数\r\n  async onDeselect(values) {\r\n    let myChart = eckhart.init(this.refs.mian);\r\n    let obj = {\r\n      grade_id: values,\r\n    };\r\n    let result = await _gradeStudent(obj);\r\n    let results = await _studentName(obj);\r\n    let newdata = _.map(result.data.result, \"score\");\r\n    let newdataname = _.map(results.data.exam, \"student_name\");\r\n    this.state.option.series[0].data = newdata;\r\n    myChart.setOption({\r\n      series: {\r\n        data: newdata,\r\n      },\r\n      xAxis: {\r\n        data: newdataname,\r\n      },\r\n    });\r\n  }\r\n}\r\nexport default ContentBox({\r\n  title: '视图展示',\r\n  Module: MainChart\r\n})\r\n\r\n"],"sourceRoot":""}